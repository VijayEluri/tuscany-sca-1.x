<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.    
-->
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><meta http-equiv="Content-Style-Type" content="text/css"><title>Tuscany
Calculator RMI Service Sample</title><!-- LINK rel="stylesheet" href="ait.css" type="text/css" --><!-- maven -->
<style type="text/css" media="all">
@import url("../../../../css/maven-base.css");
@import url("../../../../css/maven-theme.css");
@import url("../../../../css/site.css");
</style><link rel="stylesheet" href="./css/print.css" type="text/css" media="print"><!-- end maven --></head>
<body>
<H3>Tuscany Calculator-RMI Service - A Simple SCA Assembly that hosts calculator functions as RMI Services</H3>
<H3>Overview</H3>
<TABLE border="0">
	<TBODY>
		<TR>
			<TD width="100%" valign="top" align="left"> This sample is an assembly  of Calculator functions implemented in Java and exposed as RMI Services. The primary objective of developing this sample is to support the Calculator-Combo sample.<BR>
			<BR>To test this sample you might have to either run the Calculator-Combo sample after running this sample or you might  write your won SCA Application that references the services of this sample</TD>
		</TR>
	</TBODY>
</TABLE>
<H3>Location</H3>
<P>The source for this sample is located &nbsp;in the paths -  <I>samples\standalone\calculatorRMIService</I>
 of the source
distribution.<BR>
<BR>
If there is binary distribution available for these samples, then you may find these samples packaged as <I>sample-calculator-rmiService.jar.</I>
</P>
<H3><BR>
Building &amp; Running the CalculatorRMIService Sample Source</H3>
<P>If you are working with a source distribution, then you must first
build the source of this sample. <BR>
- Ensure that you have Java 5 installed on your system.<BR>
- Next, you must have Maven 2.0.4 installed on your system. Look up
http://maven.apache.org/download.html for downloading and installing
Maven.</P>
<H4>Building the CalculatorRMIService Sample</H4>
<TABLE border="0">
	<TBODY>
		<TR>
			<TD valign="top"></TD>
			<TD valign="top">Having installed Maven, open a command line console
			and switch over to the directory on your local system, where you have
			extracted the source.<BR>
			- Now switch futher into the subdirectory <I>samples\standalone\calcualtorRMIService.
			</I>Within this directory execute the following command
			<TABLE border="0">
				<TBODY>
					<TR>
						<TD><FONT color="purple">&gt;</FONT></TD>
						<TD><FONT color="purple" face="Courier New">mvn</FONT></TD>
					</TR>
				</TBODY>
			</TABLE>
			This will build the <I>calculatorRMIService</I> sample, package a JAR
			file for the composite and make it available in the sub-directory <I>samples\standalone\calculatorRMIService/target</I></TD>
			<TD></TD>
		</TR>
	</TBODY>
</TABLE>
<H4>Setting up Tuscany Standalone Runtime</H4>
<P>To run these samples you need the Tuscany Standalone Runtime. This is
available as a distribution that can be conveniently unpacked and setup
in the samples directory itself. For this, do the following: -</P>
<TABLE border="0">
	<TBODY>
		<TR>
			<TD valign="top" align="right">i)</TD>
			<TD>From the directory <I>samples\standalone\calculatorRMIService</I>
			execute the following command
			<TABLE border="0">
				<TBODY>
					<TR>
						<TD><FONT color="purple">&gt;</FONT></TD>
						<TD><FONT color="purple" face="Courier New">mvn dependency:unpack</FONT></TD>
					</TR>
				</TBODY>
			</TABLE>
			This will unpack the Tuscany Standalone Runtime Distribution to the <I>target\distribution
			</I>sub-directory within the present working directory - <I>samples\standalone\calculatorRMIService</I></TD>
		</TR>
		<TR>
			<TD valign="top">ii)</TD>
			<TD>Since this sample would require the RMI Binding Extension of
			Tuscany you must copy the RMI Extension JAR from the <I>contrib </I>sub-directory
			into the <I>extensions </I>directory of the distribution. ie. execute
			the following from the <I>samples\standalone\calculatorRMIService </I>sub-directory:
			-
			<TABLE>
				<TBODY>
					<TR>
						<TD valign="top"><FONT color="purple">&gt;</FONT></TD>
						<TD><FONT color="purple" face="Courier New">copy
						target\distribution\contrib\rmi-1.0-incubator-M2.jar <FONT
							color="purple" face="Courier New">target\distribution\extensions\rmi-1.0-incubator-M2.jar</FONT></FONT></TD>
					</TR>
				</TBODY>
			</TABLE>
			<I>Note</I> : <I>If you are working with SNAPSHOTs versions of
			Tuscany Extensions then the file <B>rmi-1.0-incubator-M2.jar</B> in
			the above command must be substituted with <B>rmi-1.0-incubator-M2-SNAPSHOT.jar</B></I></TD>
		</TR>
	</TBODY>
</TABLE>
<H4><BR>
Running the CalculatorRMIService Sample</H4>
<P>Now that the sample source has been built and the Tuscany Standalone Runtime setup, you may run the CalculatorRMIService sample as follows: -</P>
<TABLE border="0">
	<TBODY>
		<TR>
			<TD valign="top">i)</TD>
			<TD>Switch to the <I>samples\standalone\calculatorRMIService\target\distribution
			</I>sub-directory and execute the following command:
			<TABLE>
				<TBODY>
					<TR>
						<TD><FONT color="purple">&gt;</FONT></TD>
						<TD><FONT color="purple" face="Courier New">java -jar
						bin\launcher.jar ..\sample-calculator-rmiService.jar</FONT></TD>
					</TR>
				</TBODY>
			</TABLE>
			</TD>
		</TR>
		<TR>
			<TD valign="top">ii)</TD>
			<TD>You will initially observe messages that relate to resolution of
			dependencies required to run this sample and finlly see the following
			message on your console<BR>
			<FONT color="green" face="Courier New">**********************************************<BR>
			Calculator Rmi Service Started and Running...<BR>
			***********************************************<BR>
			Hit ENTER to exit</FONT><FONT color="green"></FONT></TD>
		</TR>
		<TR>
			<TD valign="top">iii)</TD>
			<TD>This message indicates that the CalculatorRMIServer has been
			successfully started and is running.</TD>
		</TR>
		<TR>
			<TD valign="top">iv)</TD>
			<TD>Whenever a client invokes this RMI Service, the console displays a message about the service method invoked.
</TD>
		</TR>
		<TR>
			<TD valign="top">v)</TD>
			<TD>Pressing the 'Enter' key will stop the RMI Server and the Tuscany
			Standalone Runtime, ending this sample with the following message<BR>
			<FONT color="green" face="Courier New">***********************************************************<BR>
			Calculator RMI Service Stopped!<BR>
			*********************************************************** </FONT></TD>
		</TR>
	</TBODY>
</TABLE>
<H4>Trying the CalculatorRMIService Sample</H4>
<P>With the CalculatorRMIService started up and running you may try it
out by writing your own RMI Client that can invoke the
CalculatorRMIService. The details of the hostname, port and server name
which your client should look up is as follows: -</P>
<TABLE border="0">
	<TBODY>
		<TR>
			<TD align="right">host =</TD>
			<TD>&quot;localhost&quot;</TD>
		</TR>
		<TR>
			<TD align="right">port =</TD>
			<TD>&quot;9999&quot;</TD>
		</TR>
		<TR>
			<TD align="right">server name =</TD>
			<TD>&quot;rmiCalculator&quot;</TD>
		</TR>
	</TBODY>
</TABLE>
<P><I>Note: You are free to modify any of the above (host, port, server
name) by making corresponding modifications to the default.scdl file of
the CalculatorRMIService sample and then running this sample.</I></P>
<P><B><I><FONT color="maroon" size="+0">Note : You may also try the
CalculatorRMIService Sample by running the Calculator-Combo sample after
running this sample. For details on setting up and running the
Calculator-Combo sample look at the Calculator-Combo-Readme.htm there.</FONT></I></B></P><H2>Code Overview</H2>
<P>The source files are physically organized as shown below:<BR>
</P>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td>
<pre>
<B><U>Calculator RMI Service</U></B>
+---main<br>    +---java<br>    |   +---calculator
<I>                &lt;Interfaces and Implementations for Calculator Functions&gt;

</I>            +---server
                   CalculatorRMIServer.java
    +---resources
        +---META-INF
             +---sca
                   default.scdl<B></B></pre></td></tr></tbody></table>
<P><B> <BR>
<BR>
Calculator RMI Service Sample (Standalone Deployment)</B></P>
<TABLE border="1">
	<TBODY>
		<TR>
			<TD width="230" valign="top">default.scdl</TD>
			<TD width="396" valign="top">Defines an assembly of calculator funtions implemented in Java and exposed as an RMI Service.</TD>
		</TR>
		<TR>
			<TD width="230">AddService.java<BR>
			AddServiceImpl.java<BR>DivideService.java<BR>
			DivideServiceImpl.java<BR>
			MathService.java<BR>
			MathServiceImpl.java<BR>
			MultiplyService.java<BR>
			MultiplyServiceImpl.java<BR>
			SubtractService.java<BR>
			SubtractServiceImpl.java</TD>
			<TD width="396">Java Interfaces and Java Implementations for various calculator
			functions..</TD>
		</TR>
		<TR>
			<TD width="230">CalculatorService.java<BR>CalculatorServiceImpl.java</TD>
			<TD width="396">Defines the coarse grained Calculator Interface and Implementation. This calculator implementation delegates function requests to other granular implemenations listed above.</TD>
		</TR>
		<TR>
			<TD width="230">CalculatorRMIServer</TD>
			<TD width="396">The main method of the RMI Server sample that keeps the runtime up and exits the appplication after the user presses 'Enter' key.</TD>
		</TR>
	</TBODY>
</TABLE>

<P></P><P></P>
</body></html>
