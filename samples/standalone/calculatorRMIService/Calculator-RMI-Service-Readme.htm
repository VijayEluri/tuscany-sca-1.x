<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><!-- Copyright (c) 2005 The Apache Software Foundation or its licensors, as applicable. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. -->
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><meta http-equiv="Content-Style-Type" content="text/css"><title>Tuscany
Hello World Web Service Sample</title><!-- LINK rel="stylesheet" href="ait.css" type="text/css" --><!-- maven -->
<style type="text/css" media="all">
@import url("../../../../css/maven-base.css");
@import url("../../../../css/maven-theme.css");
@import url("../../../../css/site.css");
</style><link rel="stylesheet" href="./css/print.css" type="text/css" media="print"><!-- end maven --></head>
<body>
<H1>Tuscany Calculator-RMI Service - A Simple SCA Assembly that hosts calculator functions as RMI Services</H1>
<H2>Overview</H2>
<TABLE border="0">
	<TBODY>
		<TR>
			<TD width="100%" valign="top" align="left"> This sample is an assembly  of Calculator functions implemented in Java and exposed as RMI Services. The primary objective of developing this sample is to support the Calculator-Combo sample.<BR>
			<BR>To test this sample you might have to either run the Calculator-Combo sample after running this sample or you might right your won SCA Application that refereences the services of this sample</TD>
		</TR>
	</TBODY>
</TABLE>
<H2>Location</H2>
<P>This  sample is  located in the following path of the samples source distribution: -<BR>
&lt;source disb&gt;/samples/standalone/calculatorRMIService<BR>
<BR>After you build the sample source the deployable 'jar' can be found in the '<I>target' </I>directory of the the project as:: <BR> &lt;source disb&gt;/samples/standalone/calculatorRMIService/target/sample-calculator-rmiService.jar<BR>
<BR>
If there is a binary distribution of the samples available then you may just about lookup for the deployable unit (jar) in the distribution.<BR>
</P><H2>Setup</H2>
<P>1) Download the Tuscany SCA Standalone Host distribution. The standalone distribution comes in two forms: -<I>distribution-1.0-incubator-M2-bin.zip </I> and <I>distribution-1.0-incubator-M2-bin.tar.gz. </I>Choose the one that best suits your platform.<BR>
<BR>2) Extract the contents of this archive file into a local directory say <I>&lt;tuscany
samples&gt;</I>. This will create the following subdirectories with contents in each: -<BR>
<I><BR>
&lt;tuscany samples&gt;</I>/boot<I> <BR>&lt;tuscany samples&gt;</I>/bin<BR>
<I>&lt;tuscany samples&gt;</I>/lib
<BR><I>&lt;tuscany samples&gt;</I>/extensions<BR><I>&lt;tuscany samples&gt;</I>/contrib<BR>
<BR>3) Create a sub-directory called 'calcRmi' under <I>&lt;tuscany
samples&gt;</I> and copy the <I>sample-calculator-rmiService.jar</I> into this directory.
</P>
<P>3) Since this sample uses the RMI extension, copy the binary archive (jar) of this extesion into the &quot;<I>extensions&quot; </I>subdirectory. The binaries for these extensions are provided in the &quot;<I>contrib&quot; </I>sub-directory. Alternatively, if you have built the Tuscany Java SCA from a source distribution, then this binary can be found in the &quot;<I>target&quot; </I>directories of the RMI Binding Extension project and also in the Local Maven Repository in the path <I>org/apache/tuscany/sca/services/bindings/* and <I>org/apache/tuscany/sca/services/containers/*.</I></I><BR></P><H2>Running</H2><P>1) Open up a commandline window and go to the 
directory <I>&lt;tuscany samples&gt;</I>. Run the Calculator RMI Service Sample as follows : -<BR>
<BR>
<FONT color="purple"><I>&lt;tuscany samples&gt;</I></FONT><FONT color="navy">java -jar
bin/launcher.jar
calcRmi/sample-calculator-rmiService.jar</FONT><BR>
<BR>
This command starts an SCA Standalone Runtime deploying the component assembly specified in the default.scdl. It then invokes the main method of the CalculatorRMIServer class that holds the runtime running, until the 'Enter' key is pressed.  <BR>
<BR>
On running the Calculator RMI Service sample the console will display ....<BR>
<BR>
<FONT color="green"> </FONT><FONT color="green" face="Courier New">**********************************************<BR>
Calculator Rmi Service
Started and Running...<BR>
***********************************************<BR>
Hit ENTER to exit</FONT><BR>
<BR>In addition to this, whenever a client invokes this RMI Service, the console displays a message about the service method invoked.
<BR><BR>To test this sample completely, run the Calculator-Combo sample after running this sample. For details on setting up and running the Calculator-Combo sample look at the Calculator-Combo-Readme.htm
there.</P><H2>Code Overview</H2>
The source files are physically organized as shown below:<br>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td>
<pre>
<B><U>Calculator RMI Service</U></B>
+---main<br>    +---java<br>    |   +---calculator
<I>                &lt;Interfaces and Implementations for Calculator Functions&gt;

</I>            +---server
                   CalculatorRMIServer.java
    +---resources
        +---META-INF
             +---sca
                   default.scdl<B></B></pre></td></tr></tbody></table>
<B> <BR>
<BR>
Calculator RMI Service Sample (Standalone Deployment)</B>
<TABLE border="1">
	<TBODY>
		<TR>
			<TD width="230" valign="top">default.scdl</TD>
			<TD width="396" valign="top">Defines an assembly of calculator funtions implemented in Java and exposed as an RMI Service.</TD>
		</TR>
		<TR>
			<TD width="230">AddService.java<BR>
			AddServiceImpl.java<BR>DivideService.java<BR>
			DivideServiceImpl.java<BR>
			MathService.java<BR>
			MathServiceImpl.java<BR>
			MultiplyService.java<BR>
			MultiplyServiceImpl.java<BR>
			SubtractService.java<BR>
			SubtractServiceImpl.java</TD>
			<TD width="396">Java Interfaces and Java Implementations for various calculator
			functions..</TD>
		</TR>
		<TR>
			<TD width="230">CalculatorService.java<BR>CalculatorServiceImpl.java</TD>
			<TD width="396">Defines the coarse grained Calculator Interface and Implementation. This calculator implementation delegates function requests to other granular implemenations listed above.</TD>
		</TR>
		<TR>
			<TD width="230">CalculatorRMIServer</TD>
			<TD width="396">The main method of the RMI Server sample that keeps the runtime up and exits the appplication after the user presses 'Enter' key.</TD>
		</TR>
	</TBODY>
</TABLE>

<P></P><P></P>
</body></html>
