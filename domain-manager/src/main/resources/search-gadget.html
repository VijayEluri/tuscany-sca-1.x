<!--
    * Licensed to the Apache Software Foundation (ASF) under one
    * or more contributor license agreements.  See the NOTICE file
    * distributed with this work for additional information
    * regarding copyright ownership.  The ASF licenses this file
    * to you under the Apache License, Version 2.0 (the
    * "License"); you may not use this file except in compliance
    * with the License.  You may obtain a copy of the License at
    * 
    *   http://www.apache.org/licenses/LICENSE-2.0
    * 
    * Unless required by applicable law or agreed to in writing,
    * software distributed under the License is distributed on an
    * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    * KIND, either express or implied.  See the License for the
    * specific language governing permissions and limitations
    * under the License.    
-->
<html>

<head>

<title>SCA Domain - Domain Composite</title>

<script type="text/javascript" src="../search-gadget/search-gadget.js"></script>
<script type="text/javascript" src="utils.js"></script>

<link rel="stylesheet" type="text/css" href="manager.css">

<script type="text/javascript">

	function search() {
		lastQuery = elementByID(gadget, 'searchField').value;
		searcher.get("query" + lastQuery, searchResponse);
		
	}
	
	function getHighlighted(artifact) {
		searcher.get("highlight" + lastQuery + ";" + artifact, searchResponse);
	}
	
	function highlightResponse(feed) {
		var entries = feed.getElementsByTagName("entry");
		var content = entries[0].getElementsByTagName("content");
		
		var results = elementByID(gadget, "results");
		results.innerHTML = content[0].firstChild.data;
		
	}
	
	function searchResponse(feed) {
		var entries = feed.getElementsByTagName("entry");
		var content = entries[0].getElementsByTagName("content");
		
		var results = elementByID(gadget, "results");
		results.innerHTML = content[0].firstChild.data;
		
	}
	
</script>

</head>

<body>


  <div id="domainSearch">
  
  <form id="domainSearchForm">
    
    <p style="margin-top:1em;margin-bottom:1em;margin-left:1em;margin-right:1em">
     	<input id="searchField" type="text" value="" />&nbsp;<input id="searchButton" type="submit" value="Search" onclick="search()" />
     </p>
     
     <br>
     <br>
     <div id="results"></div>
  </form>
  
  </div>
</body>

<script type="text/javascript">
	//@Reference
	var searcher = new tuscany.sca.Reference("searcher");
	
	var gadget = gadget(window, document);
	
	var lastQuery = "";
	
	elementByID(gadget, 'searchButton').onclick = search;
	
</script>

</html>
